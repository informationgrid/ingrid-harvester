<!--<mat-card *ngFor="let harvester of harvesters | async" class="harvester-card">
  <mat-card-header>
    <div mat-card-avatar class="example-header-image"></div>
    <mat-card-title>{{harvester.name}}</mat-card-title>
    <mat-card-subtitle>{{harvester.description}}</mat-card-subtitle>
  </mat-card-header>
  <mat-card-content>
    <p>
      Dokumente: {{harvester.summary.numberOfDocs}}
    </p>
  </mat-card-content>
  <mat-card-actions>
    <button mat-button>Import starten</button>
    <button mat-button (click)="schedule(harvester.id)">Planen</button>
    <button mat-button>Bearbeiten</button>
  </mat-card-actions>
</mat-card>-->
<div class="example-headers-align">
    <ng-container *ngFor="let item of harvesters | keyvalue">

        <h3>{{item.key}}</h3>

        <mat-expansion-panel *ngFor="let harvester of item.value" hideToggle>
            <mat-expansion-panel-header>

                <mat-panel-title>
                    <mat-slide-toggle color="primary" [checked]="!harvester.disable"
                                      title="An- / Ausschalten"
                                      (change)="handleActivation($event, harvester)"
                                      (click)="$event.stopImmediatePropagation()"></mat-slide-toggle>
                    <p>{{harvester.description || harvester.defaultAttribution}}</p>
                    <mat-spinner *ngIf="importDetail[harvester.id]?.complete === false" diameter="20"></mat-spinner>
                </mat-panel-title>

                <mat-panel-description>
                    &nbsp;
                    <mat-icon *ngIf="importDetail[harvester.id]?.summary?.numErrors > 0" color="warn">error_outline</mat-icon>
                    <mat-icon *ngIf="importDetail[harvester.id]?.summary?.numErrors === 0" class="success">check_circle_outline
                    </mat-icon>
                </mat-panel-description>

            </mat-expansion-panel-header>

            <app-importer-detail [data]="importDetail[harvester.id]" [enabled]="!harvester.disable"></app-importer-detail>

            <mat-action-row>
                <button mat-button (click)="showLog(harvester.id)">
                    <mat-icon [inline]="true">description</mat-icon>
                    Log
                </button>
                <button mat-button (click)="startImport(harvester.id)"
                        [disabled]="importDetail[harvester.id]?.complete === false">
                    <mat-icon [inline]="true">import_export</mat-icon>
                    Import starten
                </button>
                <button mat-button (click)="schedule(harvester)">
                    <mat-icon [inline]="true">schedule</mat-icon>
                    Planen
                </button>
                <div class="flex-space"></div>
                <button mat-button color="primary" (click)="edit(harvester)">
                    <mat-icon [inline]="true">edit</mat-icon>
                    Bearbeiten
                </button>
            </mat-action-row>

        </mat-expansion-panel>
    </ng-container>

    <button mat-fab
            color="primary"
            (click)="addHarvester()"
            class="mat-fab-bottom-right"
            id="btnAddHarvester">
        <mat-icon aria-label="Add Harvester">add</mat-icon>
    </button>
</div>
